{%- comment -%}
  The `home` layout passes a `post_list` object.
  This block unpacks that object's properties into the variables
  this component expects, ensuring compatibility.
{%- endcomment -%}
{%- assign limit = include.limit | default: include.post_list.limit -%}

{%-if include.category-%}
  {%-assign posts = site.categories[include.category]-%}
{%-else-%}
  {%-assign posts = site.posts-%}
{%-endif-%}

{%-if limit and posts.size > limit-%}
  {%-assign limit_exceeded = true-%}
{%-else-%}
  {%-assign limit_exceeded = false-%}
{%-endif-%}

{%- if posts.size > 0 -%}
  <ul>
    {%- for post in posts limit: limit -%}
        <li>
          <span>{{- post.date | date: site.theme_config.date_format -}}</span>
          {% if site.theme_config.lowercase_titles == true %}
          <a href="{{ post.url | relative_url }}">{{ post.title | downcase }}</a>
          {% else %}
          <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          {% endif %}
        </li>
    {%- endfor -%}
    {%- assign show_more = include.show_more | default: include.post_list.show_more -%}
    {%- if show_more and limit_exceeded -%}
      {%- assign show_more_url = include.show_more_url | default: include.post_list.show_more_url -%}
      {%- assign show_more_text = include.show_more_text | default: include.post_list.show_more_text -%}
      <li><a href="{{ show_more_url | relative_url }}">{{ show_more_text | default: "Show more..." }}</a></li>
    {%- endif -%}
  </ul>
{%- endif -%}
